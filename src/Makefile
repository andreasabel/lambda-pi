## File generated by the BNF Converter (bnfc 2.9.5).

# Makefile for building the parser and test program.

GHC        = ghc
HAPPY      = happy
HAPPY_OPTS = --array --info --ghc --coerce
ALEX       = alex
ALEX_OPTS  = --ghc

AGDA_GOAL = MAlonzo/Code/Main.hs MAlonzo/Code/Syntax.hs MAlonzo/Code/TypeChecker.hs
AGDA_FILES = \
  Main.agda \
  Nice.agda \
  Syntax.agda \
  Scope.agda

# List of goals not corresponding to file names.

.PHONY : all clean distclean

# Default goal.

all : LamPi/Test $(AGDA_GOAL)

test: LamPi/Test
	$@ ../examples/nat.agda

# Rules for compiling the Agda code

$(AGDA_GOAL) : $(AGDA_FILES)
	agda --ghc --ghc-dont-call-ghc Main.agda

# Rules for building the parser.

LamPi/Abs.hs LamPi/Layout.hs LamPi/Lex.x LamPi/Par.y LamPi/Print.hs LamPi/Test.hs : LamPi.cf Makefile
	bnfc --agda -d LamPi.cf

%.hs : %.y
	${HAPPY} ${HAPPY_OPTS} $<

%.hs : %.x
	${ALEX} ${ALEX_OPTS} $<

LamPi/Test : LamPi/Abs.hs LamPi/Layout.hs LamPi/Lex.hs LamPi/Par.hs LamPi/Print.hs LamPi/Test.hs
	${GHC} ${GHC_OPTS} $@

# Rules for cleaning generated files.

clean :
	-rm -f LamPi/*.hi LamPi/*.o LamPi/*.log LamPi/*.aux LamPi/*.dvi

distclean : clean
	-rm -f LamPi/Abs.hs LamPi/Abs.hs.bak LamPi/ComposOp.hs LamPi/ComposOp.hs.bak LamPi/Doc.txt LamPi/Doc.txt.bak LamPi/ErrM.hs LamPi/ErrM.hs.bak LamPi/Layout.hs LamPi/Layout.hs.bak LamPi/Lex.x LamPi/Lex.x.bak LamPi/Par.y LamPi/Par.y.bak LamPi/Print.hs LamPi/Print.hs.bak LamPi/Skel.hs LamPi/Skel.hs.bak LamPi/Test.hs LamPi/Test.hs.bak LamPi/XML.hs LamPi/XML.hs.bak LamPi/AST.agda LamPi/AST.agda.bak LamPi/Parser.agda LamPi/Parser.agda.bak LamPi/IOLib.agda LamPi/IOLib.agda.bak LamPi/Main.agda LamPi/Main.agda.bak LamPi/LamPi.dtd LamPi/LamPi.dtd.bak LamPi/Test LamPi/Lex.hs LamPi/Par.hs LamPi/Par.info LamPi/ParData.hs Makefile
	-rmdir -p LamPi/

# EOF
